3 Копирование файла с TFTP сервера с использованием MIB

 

3.1. Вначале необходимо настроить SNMP на коммутаторе.

 

Console(config)#snmp-server // активируем функцию SNMP на коммутаторе

Console(config)#snmp-server host 192.168.1.102 private version 2c  //
указываем IP адрес компьютера как агента, а также версию протокола (2с).
Также можно поменять порт UDP (по умолчанию - 162)

 

3.2. Задать необходимые значения параметров для приведенных ниже OID.ов

 

3.2.1 Тип файла

 

OID = 1.3.6.1.4.1.259.6.10.94.1.24.1.5.0 i 1

(Value = (1: opcode), (2: config), (3: bootRom), (5: loader))

 

3.2.2 Источник обновления

 

OID = 1.3.6.1.4.1.259.6.10.94.1.24.1.1.0 i 4 

(Values = (1: file), (2: runningCfg), (3: startUpCfg), (4: tftp), (5: unit),
(6: http))

 

3.2.3 Имя копируемого файла

 

OID =  1.3.6.1.4.1.259.6.10.94.1.24.1.2.0 s .ES3528_52M_opcode_V1.1.3.8.bix. 

 

3.2.4 Место копирования файла

 

OID = 1.3.6.1.4.1.259.6.10.94.1.24.1.3.0 i 1

Values = (1: file), (2: runningCfg), (3: startUpCfg), (4: tftp), (5: unit),
(6: http)

 

3.2.5 Имя, с которым указанный выше файл, будет скопирован

 

Object ID = 1.3.6.1.4.1.259.6.10.94.1.24.1.4.0 s
.ES3528_52M_opcode_V1.1.3.8.bix.

 

3.2.6 IP адрес TFTP сервера

 

Object ID = 1.3.6.1.4.1.259.6.10.94.1.24.1.6.0 а .192.168.1.103.

 

3.2.7 Запустить процесс копирования с сервера

 

OID = 1.3.6.1.4.1.259.6.10.94.1.24.1.8.0 i 2

Values = (1: notCopying), (2: copy)

 

3.2.8 Сделать только что загруженный файл стартовым

 

OID= 1.3.6.1.4.1.259.6.10.94.1.7.0 s .ES3528_52M_opcode_V1.1.3.8.bix.

 

3.2.9 Перезагрузка устройства

 

OID= 1.3.6.1.4.1.259.6.10.94.1.7.3.0 i 3

Values = (1: running), (2: warmBoot), (3: coldBoot)

 

3.3. Просмотреть статут файлов на коммутаторе можно в подгруппе OID.а
-1.3.6.1.4.1.259.6.10.94.1.24.2.

